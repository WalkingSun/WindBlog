---
layout: blog
title: Go 常用知识点及实例
categories: [Go, 知识点]
description: 熟悉
keywords: Go
cnblogsClass: \[Markdown\],\[随笔分类\]Go
oschinaClass: \[Markdown\]
csdnClass: \[Markdown\]
163Class: \[Markdown\]
51ctoClass: \[Markdown\]
chinaunixClass: \[Markdown\]
sinaClass: \[Markdown\]
---

# 时间
[https://www.cnblogs.com/followyou/p/12187949.html](https://www.cnblogs.com/followyou/p/12187949.html) 

# error
[https://www.cnblogs.com/followyou/p/12185514.html](https://www.cnblogs.com/followyou/p/12185514.html) 

# 断言
[https://www.cnblogs.com/followyou/p/12185509.html](https://www.cnblogs.com/followyou/p/12185509.html) 

# 定义函数类型
```go
type ExposureQualityService interface {

}

type NewExposureQualityServiceFunc func() ExposureQualityService
```

# 格式转换
[https://www.cnblogs.com/followyou/p/12194128.html](https://www.cnblogs.com/followyou/p/12194128.html) 


# 打断点
```go
fmt.Println(exposureData)
os.Exit(1)
```

# 休眠
  func Sleep(d Duration)
  
  
  ```go
  const (
  Nanosecond Duration = 1
  Microsecond = 1000 * Nanosecond
  Millisecond = 1000 * Microsecond
  Second = 1000 * Millisecond
  Minute = 60 * Second
  Hour = 60 * Minute
  )
  ```

# urlencode
- 字符串
```go
package main

import (
	"fmt"
	"net/url"
)

func main() {
	query := "Hellö Wörld@Golang"
	fmt.Println(url.QueryEscape(query))
}
```
- 多个参数
```go
package main

import (
	"fmt"
	"net/url"
)

func main() {
	params := url.Values{}
	params.Add("name", "@Rajeev")
	params.Add("phone", "+919999999999")

	fmt.Println(params.Encode())
}
```
- 编码路径
```go
package main

import (
	"fmt"
	"net/url"
)

func main() {
	path := "path with?reserved+characters"
	fmt.Println(url.PathEscape(path))
}

//  Output
// path%20with%3Freserved+characters
```

解码参考 [https://www.urldecoder.io/golang/](https://www.urldecoder.io/golang/)


# 去除首尾空格
```go
package main

import (
	"fmt"
	"strings"
)

func main() {
	str := " hello world!  "
	str = strings.TrimSpace(str)
	fmt.Println(str)
}```


# 解析请求参数中带”;“，解析出错
```go
http://tj-adc.wtzw.com/click?source=wolong12;123344&project=reader_free&callback=__CALLBACK_URL__&channel=qi-guanfang_hc&ua=Dalvik%5C/2.1.0%20%28Linux;%20U;%20Android%209;%20V1813BA%20Build%5C/PKQ1.181030.001%29
```
解析请求的时候发现ua参数“;”开始之后的参数都被过滤了。

查看 net/url包的源码,
```
...
key := query
if i := strings.IndexAny(key, "&;"); i >= 0 {
	key, query = key[:i], key[i+1:]
} else {
	query = ""
}
...
```
发现go在解析参数的时候按照&和;分割。

解决：
```go
    // 对;进行url编码，再次解析
    rawQuery := ctr.Ctx.Request.URL.RawQuery
	if strings.Contains(rawQuery, ";") {
		rawQuery = strings.Replace(rawQuery, ";", "%3B", -1)
		paramsRaw, errs := url.ParseQuery(rawQuery)
		if errs == nil {
			for k, v := range paramsRaw {
				params.Set(k, v[0])
			}
		}
	}
```